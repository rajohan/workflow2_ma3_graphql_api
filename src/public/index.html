<!DOCTYPE html>
<html lang="en">
    <head>
        <meta charset="UTF-8" />
        <title>Noroff GraphQL API</title>
        <link rel="stylesheet" href="css/prism.css" />
        <link rel="stylesheet" href="css/styles.css" />
    </head>
    <body>
        <header>
            <h1>Noroff GraphQL API</h1>
        </header>
        <main>
            <p>
                This is a simple GraphQL API created to be used for Workflow 2 Module
                Assignment 3.
            </p>
            <p>
                The API has dummy posts/users where all the posts belongs to a specific
                user. It exposes 2 graphql queries. Both queries accepts an ID to retrieve
                a single post or user.
            </p>
            <p>The API endpoint is: https://noroff-wf2-ma3.herokuapp.com/graphql</p>
            <p>
                You can find the GraphQL Playground
                <a href="https://noroff-wf2-ma3.herokuapp.com/graphql"> here </a>
            </p>
            <h2>Examples</h2>

            <h3>Get all posts</h3>
            <pre>
                <code class="language-graphql">
    query {
        posts {
            id
            title
            body
            image
            createdAt
        }
    }
                </code>
            </pre>

            <h3>Get a post by id</h3>
            <pre>
                <code class="language-graphql">
    query {
        posts(id: 1) {
            id
            title
            body
            image
            createdAt
        }
    }
                </code>
            </pre>

            <h3>Get author of a post</h3>
            <pre>
                <code class="language-graphql">
    query {
        posts(id: 1) {
            id
            title
            body
            image
            createdAt
            user {
              id
              username
            }
        }
    }
                </code>
            </pre>

            <h3>Get all users</h3>
            <pre>
                <code class="language-graphql">
    query {
        users {
            id
            username
            email
            firstName
            lastName
            createdAt
        }
    }
                </code>
            </pre>

            <h3>Get a user by id</h3>
            <pre>
                <code class="language-graphql">
    query {
        users(id: 1) {
            id
            username
            email
            firstName
            lastName
            createdAt
        }
    }
                </code>
            </pre>

            <h3>Get a user's posts</h3>
            <pre>
                <code class="language-graphql">
    query {
        users(id: 1) {
            username
            posts {
                id
                title
                body
                image
                createdAt
            }
        }
    }
                </code>
            </pre>

            <h3>Example usage with fetch</h3>
            <pre>
                <code class="language-javascript">
    const getData = async () => {
        const response = await fetch("https://noroff-wf2-ma3.herokuapp.com/graphql", {
            method: "POST",
            headers: { "Content-Type": "application/json" },
            body: JSON.stringify({
                query: `
                    query {
                        posts(id: 1) {
                            id
                            title
                            body
                            image
                            createdAt
                        }
                    }
                `,
            }),
        });

        const json = await response.json();

        console.log(json.data.posts);
    };

    getData();
                </code>
            </pre>

            <h3>Example usage with apollo-boost</h3>
            <pre>
                <code class="language-javascript">
    import ApolloClient, { gql } from "apollo-boost";

    const getData = async () => {
        const client = new ApolloClient({
            uri: "https://noroff-wf2-ma3.herokuapp.com/graphql"
        });

        const response = await client.query({
            query: gql`
                {
                    posts(id: 1) {
                        id
                        title
                        body
                        image
                        createdAt
                    }
                }
            `,
        });

        console.log(response.data.posts);
    };

    getData();
                </code>
            </pre>
        </main>
        <footer>Copyright Noroff 2021</footer>
        <script src="js/prism.js"></script>
    </body>
</html>
